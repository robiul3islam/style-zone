<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>STYLE ZONE</title>

<script src="https://cdn.tailwindcss.com"></script>

<style>
body{background:#0f0f0f;color:white;font-family:sans-serif}
.gold-text{color:#d4af37}
.gold-bg{background:#d4af37}
.product-card{background:#1a1a1a;transition:.4s}
.product-card:hover{transform:translateY(-10px)}
</style>
</head>

<body>

<!-- HEADER -->
<header class="text-center py-10">
<h1 class="text-4xl font-bold gold-text">STYLE ZONE</h1>
<p class="text-gray-400 mt-2">Premium Fashion Collection</p>
</header>

<!-- FILTER + SEARCH -->
<section class="max-w-6xl mx-auto px-4 mb-10">

<div class="flex flex-wrap gap-3 justify-center mb-6">
<button onclick="filterProducts('All',this)" class="gold-bg text-black px-4 py-2 rounded-full">All</button>
<button onclick="filterProducts('Men',this)" class="border border-gray-600 px-4 py-2 rounded-full">Men</button>
<button onclick="filterProducts('Women',this)" class="border border-gray-600 px-4 py-2 rounded-full">Women</button>
</div>

<div class="flex flex-col md:flex-row gap-4 justify-center">
<input id="searchInput" placeholder="Search product..."
class="px-4 py-2 rounded-lg text-black w-full md:w-1/3">

<select id="sortSelect" class="px-4 py-2 rounded-lg text-black w-full md:w-1/4">
<option value="">Sort By</option>
<option value="low">Price Low to High</option>
<option value="high">Price High to Low</option>
</select>
</div>

</section>

<!-- PRODUCTS -->
<section class="max-w-6xl mx-auto px-4 pb-20">
<div id="shop-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8"></div>
</section>

<script>

/* üî• ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ Google Sheet CSV publish link */
const CSV_URL="https://docs.google.com/spreadsheets/d/e/2PACX-1vTIcDibFYdzWDxKHSiwHn0K4Z8A3wTjHQhNSZoVIPe5QnvOCbM0I4xYMUMKRf9V5K-0Pgh4JF4mHW7F/pub?gid=0&single=true&output=csv";

let allProducts=[];
let currentCategory="All";

/* Fix Google Drive Image */
function fixImage(url){
if(!url) return "https://via.placeholder.com/400x500?text=No+Image";

if(url.includes("drive.google.com")){
let id=url.match(/[-\w]{25,}/);
if(id) return `https://drive.google.com/uc?export=view&id=${id[0]}`;
}
return url;
}

/* Fetch Products */
async function fetchProducts(){
try{
const res=await fetch(CSV_URL);
const text=await res.text();

const rows=text.trim().split("\n").map(r=>r.split(","));
rows.shift();

allProducts=rows.map(r=>({
name:r[0]||"Product",
price:parseFloat(r[1])||0,
image:fixImage(r[2]),
category:r[3]||"All"
}));

renderProducts(allProducts);

}catch{
document.getElementById("shop-grid").innerHTML=
`<p class="text-center text-red-500 col-span-full py-20">
Sheet publish ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡¶®‡¶ø ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶≠‡ßÅ‡¶≤‡•§
</p>`;
}
}

/* Render Products */
function renderProducts(products){
const grid=document.getElementById("shop-grid");

if(products.length===0){
grid.innerHTML=`<p class="text-center text-gray-400 col-span-full py-20">
‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø
</p>`;
return;
}

grid.innerHTML=products.map(p=>`
<div class="product-card rounded-2xl overflow-hidden">
<div class="h-[400px] overflow-hidden">
<img src="${p.image}" 
class="w-full h-full object-cover"
onerror="this.src='https://via.placeholder.com/400x500?text=Image+Error'">
</div>
<div class="p-6 text-center">
<p class="text-xs text-gray-400">${p.category}</p>
<h3 class="text-xl mt-2">${p.name}</h3>
<p class="gold-text text-2xl font-bold mt-2">‡ß≥ ${p.price}</p>
</div>
</div>
`).join("");
}

/* Filter */
function filterProducts(cat,el){
currentCategory=cat;

document.querySelectorAll("section button").forEach(b=>{
b.classList.remove("gold-bg","text-black");
b.classList.add("border","border-gray-600");
});

el.classList.add("gold-bg","text-black");
el.classList.remove("border");

applyFilters();
}

/* Apply Search + Sort */
function applyFilters(){
let filtered=currentCategory==="All"
? allProducts
: allProducts.filter(p=>p.category===currentCategory);

let search=document.getElementById("searchInput").value.toLowerCase();
filtered=filtered.filter(p=>p.name.toLowerCase().includes(search));

let sort=document.getElementById("sortSelect").value;
if(sort==="low") filtered.sort((a,b)=>a.price-b.price);
if(sort==="high") filtered.sort((a,b)=>b.price-a.price);

renderProducts(filtered);
}

document.getElementById("searchInput").addEventListener("input",applyFilters);
document.getElementById("sortSelect").addEventListener("change",applyFilters);

fetchProducts();

</script>

</body>
</html>
