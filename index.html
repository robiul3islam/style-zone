<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STYLE ZONE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body{background:#0f0f0f;color:white;font-family:sans-serif}
        .gold-text{color:#d4af37}
        .gold-bg{background:#d4af37}
        .product-card{background:#1a1a1a;transition:.4s; border-radius: 15px; overflow: hidden; border: 1px solid #222;}
        .product-card:hover{transform:translateY(-10px); border-color: #d4af37;}
    </style>
</head>
<body>

    <header class="text-center py-10">
        <h1 class="text-4xl font-bold gold-text uppercase tracking-widest">STYLE ZONE</h1>
        <p class="text-gray-400 mt-2">Premium Fashion Collection</p>
    </header>

    <section class="max-w-6xl mx-auto px-4 mb-10">
        <div class="flex flex-wrap gap-3 justify-center mb-6">
            <button onclick="filterProducts('All',this)" class="gold-bg text-black px-6 py-2 rounded-full font-bold">সবগুলো</button>
            <button onclick="filterProducts('পাঞ্জাবি',this)" class="border border-gray-600 px-6 py-2 rounded-full font-bold hover:border-yellow-500 transition">পাঞ্জাবি</button>
            <button onclick="filterProducts('টি-শার্ট',this)" class="border border-gray-600 px-6 py-2 rounded-full font-bold hover:border-yellow-500 transition">টি-শার্ট</button>
        </div>

        <div class="flex flex-col md:flex-row gap-4 justify-center">
            <input id="searchInput" placeholder="প্রোডাক্ট খুঁজুন..." class="px-4 py-2 rounded-lg text-black w-full md:w-1/3 outline-none">
            <select id="sortSelect" class="px-4 py-2 rounded-lg text-black w-full md:w-1/4 outline-none">
                <option value="">সাজিয়ে দেখুন</option>
                <option value="low">কম দাম থেকে বেশি</option>
                <option value="high">বেশি দাম থেকে কম</option>
            </select>
        </div>
    </section>

    <section class="max-w-6xl mx-auto px-4 pb-20">
        <div id="shop-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">
            <p class="text-center col-span-full py-20 text-gray-500 italic">কালেকশন লোড হচ্ছে...</p>
        </div>
    </section>

    <script>
        // আপনার গুগল শিট CSV লিঙ্ক
        const CSV_URL="https://docs.google.com/spreadsheets/d/e/2PACX-1vTIcDibFYdzWDxKHSiwHn0K4Z8A3wTjHQhNSZoVIPe5QnvOCbM0I4xYMUMKRf9V5K-0Pgh4JF4mHW7F/pub?gid=0&single=true&output=csv";

        let allProducts=[];
        let currentCategory="All";

        function fixImage(url){
            if(!url) return "https://via.placeholder.com/400x500?text=Style+Zone";
            if(url.includes("drive.google.com")){
                let id=url.match(/[-\w]{25,}/);
                if(id) return `https://drive.google.com/uc?export=view&id=${id[0]}`;
            }
            return url;
        }

        async function fetchProducts(){
            try{
                const res = await fetch(CSV_URL);
                const text = await res.text();
                const rows = text.trim().split("\n").map(r => r.split(","));
                rows.shift(); // প্রথম রো (Header) বাদ দিতে

                allProducts = rows.map(r => ({
                    name: r[0]?.trim() || "Elite Product",
                    price: parseFloat(r[1]) || 0,
                    image: fixImage(r[2]?.trim()),
                    category: r[3]?.trim() || "All"
                }));
                renderProducts(allProducts);
            } catch(e) {
                document.getElementById("shop-grid").innerHTML = `<p class="text-center text-red-500 col-span-full py-20">ডাটা লোড হচ্ছে না। গুগল শিট CSV মোডে পাবলিশ করা হয়েছে কি না চেক করুন।</p>`;
            }
        }

        function renderProducts(products){
            const grid = document.getElementById("shop-grid");
            if(products.length === 0){
                grid.innerHTML = `<p class="text-center text-gray-400 col-span-full py-20">কোনো প্রোডাক্ট পাওয়া যায়নি</p>`;
                return;
            }
            grid.innerHTML = products.map(p => `
                <div class="product-card">
                    <div class="h-[400px] overflow-hidden">
                        <img src="${p.image}" class="w-full h-full object-cover" onerror="this.src='https://via.placeholder.com/400x500'">
                    </div>
                    <div class="p-6 text-center">
                        <p class="text-[10px] text-gray-500 uppercase tracking-widest">${p.category}</p>
                        <h3 class="text-xl mt-2 font-semibold">${p.name}</h3>
                        <p class="gold-text text-2xl font-bold mt-2">৳ ${p.price}</p>
                        <a href="https://wa.me/8801976978728?text=আমি এই '${p.name}' টি কিনতে চাই" target="_blank" class="block bg-green-600 hover:bg-green-700 text-white mt-4 py-3 rounded-xl font-bold transition-colors">হোয়াটসঅ্যাপ অর্ডার</a>
                    </div>
                </div>
            `).join("");
        }

        function filterProducts(cat, el){
            currentCategory = cat;
            document.querySelectorAll("section button").forEach(b => {
                b.classList.remove("gold-bg", "text-black");
                b.classList.add("border", "border-gray-600");
            });
            el.classList.add("gold-bg", "text-black");
            el.classList.remove("border");
            applyFilters();
        }

        function applyFilters(){
            let filtered = currentCategory === "All" ? allProducts : allProducts.filter(p => p.category === currentCategory);
            let search = document.getElementById("searchInput").value.toLowerCase();
            filtered = filtered.filter(p => p.name.toLowerCase().includes(search));
            let sort = document.getElementById("sortSelect").value;
            if(sort === "low") filtered.sort((a,b) => a.price - b.price);
            if(sort === "high") filtered.sort((a,b) => b.price - a.price);
            renderProducts(filtered);
        }

        document.getElementById("searchInput").addEventListener("input", applyFilters);
        document.getElementById("sortSelect").addEventListener("change", applyFilters);
        
        fetchProducts();
    </script>

</body>
</html>
